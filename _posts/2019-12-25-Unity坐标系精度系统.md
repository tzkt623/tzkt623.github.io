---
layout:     post                    # 使用的布局（不需要改）
title:      Unity 坐标系与缩放           # 标题 
subtitle:   Unity coordinates and scales #副标题
date:       2019-12-25              # 时间
author:     Tezcat                     # 作者
catalog: true                       # 是否归档
tags:                               #标签
    - Unity
    - Coordinate
---

# Unity 坐标系与缩放
## *翻译 -- Unity coordinates and scales*
### [原文地址](http://davenewson.com/posts/2013/unity-coordinates-and-scales.html)
与UDK不同,Unity不会主动限制游戏世界的大小,你可以自由地扩展并让你的玩家漫游并迷失在巨大的世界中,直到引擎坐标系统位数溢出并导致数学上的崩溃.

从全尺寸的行星到苹果里的虫子,Unity让你在任何你想要的尺度上工作——然而如果你试图同时在超小和超大的尺度上进行操作,你会发现你可能遇到了一些严重的问题.

这篇文章讲述了Unity的坐标系统的工作原理,以及它对游戏世界区域的影响,渲染时的问题,还有如何创建超大型的世界.

## 浮点数精度
Unity允许你在浮点数范围内的坐标系统中放置物体.X,Y,Z的值算上小数总共只有7位有效数字,比如12345.67或12.34567.

在这个系统中,你离原点越远(0.000000--绝对的零),你失去的浮点精度就越多.例如,设一个Unity单位等于1米,那么一个有1.234567单位的对象具有的浮点精度为6位小数(1微米),而另一个有76543.21单位的对象精度只有两位小数(1厘米),因此后者精度较低。

## 空间并不是无限的
就算你在Unity里面乱填坐标数字超过float范围,也是可以的。比如你将一个物体的坐标在任意一个轴上设置超过100000,这时系统会发出警告,但它仍然允许你这样做.同样的,在Unity中能设置的最大坐标值是3e+38,它是一个3后面有38个0,这是一个相当惊人的数字,但是当数值大到超过一定的级别时,由于科学计数法的表示问题,你不能手动控制精度,所以能做的就是控制第一个数字后面的零的数量。

说实话,最好将对象位置设定在建议最大值100000以下,以确保浮点精度至少有一位小数。问题在于需要什么级别的浮点精度才能使玩家觉得游戏玩起来感觉还算正常,因为当浮点精度较低时,摄像机的运动和物理计算将开始变得很不稳定。

## 举一个实际例子
还是设一个Unity单位等于1米,对于距离摄像机约1米的人体大小的物体,你需要精确到毫米才能在低速下平稳移动,否则你将看到物体在运动中的发生抖动,也就是说需要3位精度小数(10^-3=毫米)。

因为小数精度设定为3位,总共只有7位,所以就只能有4位代表米(1234.567)。因此,最大坐标值就是9999.999,这还不到十公里。

如果你的玩家并不总是步行,那么不需要在任何时刻都精确到毫米级别.假设另外一个例子,我希望让玩家驾驶一架飞机,并且只能在原点附近移动,那么在远距离只需要精确到厘米级别(0.00)就可以了.这样的结果就是,我可以让坐标区域达到99999.99--几乎100公里.

这只是一个假设,并不是真实物理限制.当我们超过100公里时,物理计算和渲染会变得不稳定,所以我们要弹出一个警告告诉玩家“回到战场”,并在超时时间内杀死他们,但是实际上确实可以再走90万米,让小数点再退一位.对于玩家来说,这种设定不是很扯淡吗?

## 超越天空盒
Kerbal太空计划使用的一个解决方案是将摄像机限制在原点,并围绕它旋转世界.我们的“世界”只有有限的小数位数用于渲染,世界中物体的实际坐标是存储在另一个自定义坐标系统中,每一帧计算并转换到Unity的坐标空间.

KSP还使用比例天空盒解决方案来表示遥远的天体.当玩家靠近这些物体时,它们会隐藏在天空盒中,并在玩家的游戏空间中生成一个真实大小的版本,让玩家可以与之交互。